
<div class="properties-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h1 class="page-title">Your listings</h1>
      <a routerLink="/host/add-property" class="btn-airbnb">
        <i class="bi bi-plus-circle"></i>
        Create listing
      </a>
    </div>
  </div>

  <!-- Tabs Section -->
  <div class="tabs-section">
    <button 
      class="tab-btn"
      [class.active]="activeTab === 'all'"
      (click)="activeTab = 'all'">
      All ({{ properties.length }})
    </button>
    <button 
      class="tab-btn"
      [class.active]="activeTab === 'active'"
      (click)="activeTab = 'active'">
      Listed ({{ activePropertiesCount }})
    </button>
    <button 
      class="tab-btn"
      [class.active]="activeTab === 'inactive'"
      (click)="activeTab = 'inactive'">
      Unlisted ({{ inactivePropertiesCount }})
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner-border text-danger" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="loading-text">Loading your properties...</p>
  </div>

  <!-- Properties Grid -->
  <div *ngIf="!isLoading && filteredProperties.length > 0" class="properties-grid">
    <div *ngFor="let property of filteredProperties" class="property-card">
      <!-- Property Image -->
      <div class="property-image-container">
        <img 
          [src]="getPrimaryImage(property)" 
          [alt]="property.title"
          class="property-image">
        
        <!-- Status Badge -->
        <div class="status-badge" [class.active]="property.isActive">
          {{ property.isActive ? 'Listed' : 'Unlisted' }}
        </div>
      </div>

      <!-- Property Details -->
      <div class="property-details">
        <div class="property-header">
          <h3 class="property-title">{{ property.title }}</h3>
          <div class="property-rating">
            <i class="bi bi-star-fill"></i>
            <span>{{ property.averageRating }}</span>
            <span class="reviews-count">({{ property.totalReviews }})</span>
          </div>
        </div>

        <p class="property-location">
          <i class="bi bi-geo-alt"></i>
          {{ property.city }}, {{ property.country }}
        </p>

        <div class="property-stats">
          <span class="stat-item">
            <i class="bi bi-house-door"></i>
            {{ property.propertyTypeName }}
          </span>
          <span class="stat-item">
            <i class="bi bi-people"></i>
            {{ property.maxGuests }} guests
          </span>
          <span class="stat-item">
            <i class="bi bi-door-closed"></i>
            {{ property.bedrooms }} beds
          </span>
        </div>

        <div class="property-footer">
          <div class="price-section">
            <span class="price">${{ property.pricePerNight }}</span>
            <span class="price-label">per night</span>
          </div>
          
          <div class="bookings-info">
            <i class="bi bi-calendar-check"></i>
            {{ property.totalBookings }} bookings
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <a 
            [routerLink]="['/host/edit-property', property.id]" 
            class="btn-action btn-edit">
            <i class="bi bi-pencil"></i>
            Edit
          </a>
          
          <button 
            (click)="togglePropertyStatus(property)"
            class="btn-action btn-toggle">
            <i class="bi" [class.bi-eye-slash]="property.isActive" [class.bi-eye]="!property.isActive"></i>
            {{ property.isActive ? 'Unlist' : 'List' }}
          </button>
          
          <button 
            (click)="deleteProperty(property)"
            class="btn-action btn-delete">
            <i class="bi bi-trash"></i>
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && filteredProperties.length === 0" class="empty-state">
    <div class="empty-icon">
      <i class="bi bi-house-x"></i>
    </div>
    <h2>No properties found</h2>
    <p *ngIf="activeTab === 'all'">
      You haven't created any listings yet. Create your first listing to get started!
    </p>
    <p *ngIf="activeTab === 'active'">
      You don't have any listed properties at the moment.
    </p>
    <p *ngIf="activeTab === 'inactive'">
      You don't have any unlisted properties.
    </p>
    <a routerLink="/host/add-property" class="btn-airbnb">
      <i class="bi bi-plus-circle"></i>
      Create your first listing
    </a>
  </div>
</div>