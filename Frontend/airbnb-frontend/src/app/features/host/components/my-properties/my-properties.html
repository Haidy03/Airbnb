<div class="listings-page">
  
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Your listings</h1>
    
    <div class="header-actions">
      <button class="view-toggle-btn" (click)="toggleViewMode()" title="Toggle view">
        <svg *ngIf="viewMode() === 'grid'" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
        <svg *ngIf="viewMode() === 'list'" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
        </svg>
      </button>

      <button class="add-property-btn" (click)="addNewProperty()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading()" class="loading-container">
    <div class="spinner"></div>
    <p>Loading your listings...</p>
  </div>

  <!-- Properties Grid -->
  <div *ngIf="!loading() && properties().length > 0" class="properties-grid" [class.list-view]="viewMode() === 'list'">
    
    <div *ngFor="let property of properties()" 
         class="property-card">
      
      <!-- Property Image -->
      <div class="property-image" (click)="editProperty(property.id)">
        <img [src]="property.coverImage || property.images[0]?.url" 
             [alt]="property.title"
             *ngIf="property.coverImage || property.images.length > 0">
        
        <div class="image-placeholder" *ngIf="!property.coverImage && property.images.length === 0">
          <svg width="80" height="80" viewBox="0 0 80 80" fill="#CCCCCC">
            <path d="M40 10L10 30v40h60V30L40 10zm0 8l20 15v27H20V33l20-15z"/>
          </svg>
        </div>

        <!-- Status Badge -->
        <div class="status-badge" [ngClass]="getStatusBadgeClass(property.status)">
          <span class="status-dot"></span>
          <span class="status-text">{{ getStatusLabel(property.status) }}</span>
        </div>

        <!-- Quick Action Overlay -->
        <div class="quick-actions-overlay">
          <button 
            class="quick-action-btn" 
            (click)="editProperty(property.id)"
            title="Edit">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="white">
              <path d="M15.5 2.5L17.5 4.5L6.5 15.5L2.5 17.5L4.5 13.5L15.5 2.5Z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Property Info -->
      <div class="property-info">
        <div class="property-header">
          <h3 class="property-title" (click)="editProperty(property.id)">
            {{ property.title }}
          </h3>
          
          <!-- Publish Toggle -->
          <label class="publish-toggle" (click)="$event.stopPropagation()">
            <input 
              type="checkbox" 
              [checked]="property.status === 'published'"
              (change)="togglePublishStatus(property, $event)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <p class="property-location">{{ getLocationString(property) }}</p>
        
        <!-- Property Stats -->
        <div class="property-stats">
          <span class="stat-item">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 0L10 5h5l-4 3 1.5 5L8 10l-4.5 3L5 8 1 5h5z"/>
            </svg>
            {{ property.stats.averageRating.toFixed(1) }}
          </span>
          <span class="stat-item">
            {{ property.stats.totalReviews }} reviews
          </span>
          <span class="stat-item">
            ${{ property.pricing.basePrice }}/night
          </span>
        </div>
      </div>

    </div>

  </div>

  <!-- Empty State -->
  <div *ngIf="!loading() && properties().length === 0" class="empty-state">
    <div class="empty-illustration">
      <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
        <rect x="30" y="40" width="60" height="50" rx="4" stroke="#DDDDDD" stroke-width="2"/>
        <path d="M30 60L60 40L90 60" stroke="#DDDDDD" stroke-width="2" fill="none"/>
        <rect x="50" y="65" width="20" height="25" fill="#EBEBEB"/>
        <rect x="40" y="50" width="10" height="10" fill="#EBEBEB"/>
        <rect x="70" y="50" width="10" height="10" fill="#EBEBEB"/>
      </svg>
    </div>
    
    <h2 class="empty-title">No listings yet</h2>
    <p class="empty-description">
      Create your first listing to start hosting and earning.
    </p>
    
    <button class="create-listing-btn" (click)="addNewProperty()">
      Create your first listing
    </button>
  </div>

</div>