<div class="card border-0 h-100 bg-transparent service-card-hover" style="cursor: pointer;" [routerLink]="['/services', service.id]">
  
  <!-- Image Wrapper -->
  <div class="position-relative rounded-4 overflow-hidden mb-2 aspect-ratio-1x1 bg-light">
    
    <!-- ✅ Heart Icon Button -->
    <button class="wishlist-btn position-absolute top-0 end-0 m-2 p-0 border-0 bg-transparent" 
            (click)="toggleWishlist($event)">
      <!-- قلب ملون (محفوظ) -->
      <i *ngIf="isWishlisted()" class="bi bi-heart-fill text-danger heart-icon"></i>
      
      <!-- قلب فارغ (غير محفوظ) -->
      <i *ngIf="!isWishlisted()" class="bi bi-heart text-white heart-icon shadow-icon"></i>
    </button>

    <!-- Image -->
    <img [src]="getImageUrl(service.imageUrl)" 
         class="w-100 h-100 object-fit-cover" 
         [alt]="service.title"
         onerror="this.src='assets/images/placeholder.jpg'">
  </div>

  <!-- Content (زي ما هو) -->
  <div class="card-body p-0 pt-1">
    <div class="d-flex justify-content-between align-items-start mb-1">
      <h3 class="h6 fw-bold mb-0 text-dark text-truncate pe-2" style="font-size: 16px;">
        {{ service.title }}
      </h3>
      <div class="d-flex align-items-center gap-1 small text-dark" *ngIf="service.rating">
        <i class="bi bi-star-fill" style="font-size: 12px;"></i>
        <span>{{ service.rating | number:'1.1-1' }}</span>
      </div>
    </div>

    <p class="text-muted small mb-1 text-truncate">
      {{ service.categoryName }} by {{ service.hostName }}
    </p>

    <div class="mt-1">
      <div class="d-flex align-items-baseline gap-1 text-dark">
        <span class="fw-bold fs-6">From {{ service.pricePerUnit | currency:'EGP ':'symbol':'1.0-0' }}</span>
        <span class="small">/ {{ service.pricingUnit }}</span>
      </div>
    </div>
  </div>
</div>