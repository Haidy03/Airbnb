<div *ngIf="!isLoading && service" class="pb-5 mb-5"> <!-- Margin bottom for fixed bar -->

  <!-- 1. Hero Section (Banner + Overlapping Profile) -->
  <div class="container-fluid px-0 px-md-5 mt-4">
    <div class="position-relative text-center">
      
      <!-- Banner Image -->
      <div class="rounded-4 overflow-hidden mx-auto hero-banner" style="max-width: 900px; height: 400px;">
        <img [src]="service.images[0]" 
             class="w-100 h-100 object-fit-cover" 
             onerror="this.src='https://images.unsplash.com/photo-1556910103-1c02745a30bf'">
      </div>

      <!-- Overlapping Host Profile Picture -->
      <div class="position-absolute start-50 translate-middle-x host-avatar-container">
        <img [src]="service.hostAvatar || 'assets/images/placeholder-user.png'" 
             class="rounded-circle border border-4 border-white shadow-sm object-fit-cover"
             width="120" height="120">
      </div>

    </div>
  </div>

  <!-- 2. Main Info (Title, Rating) -->
  <div class="container text-center mt-5 pt-3" style="max-width: 700px;">
    
    <h1 class="display-5 fw-bold mb-3 text-dark">{{ service.title }}</h1>
    
    <p class="text-muted fs-5 mb-4">
      {{ service.description | slice:0:100 }}...
    </p>

    <!-- Rating & Host Name -->
    <div class="d-flex justify-content-center align-items-center gap-2 mb-4 small fw-bold text-dark">
      <i class="bi bi-star-fill text-dark"></i>
      <span>{{ service.rating | number:'1.2-2' }}</span>
      <span>·</span>
      <span class="text-decoration-underline">{{ service.reviewsCount || 239 }} reviews</span>
      <span>·</span>
      <span class="text-muted fw-normal">{{ service.categoryName }} by {{ service.hostName }}</span>
    </div>

    <!-- Action Icons -->
    <div class="d-flex justify-content-center gap-4 mb-5">
      <button class="btn btn-light rounded-circle p-2 shadow-sm"><i class="bi bi-share"></i></button>
      <button class="btn btn-light rounded-circle p-2 shadow-sm"><i class="bi bi-heart"></i></button>
    </div>

  </div>

  <div class="container" style="max-width: 700px;">
    <hr class="text-muted opacity-25">
  </div>

  <!-- 3. Content Sections (Single Column Layout) -->
  <div class="container" style="max-width: 700px;">

    <!-- A. Menu Options (Visual Mockup based on screenshot) -->
    <section class="py-4">
      <div *ngFor="let item of menuItems" class="d-flex gap-3 mb-4 align-items-center">
        <img [src]="item.img" class="rounded-3 object-fit-cover" width="100" height="100">
        <div>
          <h3 class="h6 fw-bold mb-1">{{ item.title }}</h3>
          <p class="small text-muted mb-1">{{ item.price | currency:'EGP ':'symbol':'1.0-0' }} / guest</p>
          <p class="small text-muted mb-0 line-clamp-2">{{ item.desc }}</p>
        </div>
      </div>
      <button class="btn btn-light border w-100 fw-bold py-2 mt-2">Show all 8</button>
    </section>

    <hr class="text-muted opacity-25">

    <!-- B. Qualifications -->
    <section class="py-4">
      <h3 class="h4 fw-bold mb-4">My qualifications</h3>
      
      <!-- Host Card -->
      <div class="card shadow-sm border-0 rounded-4 p-4 mb-4">
        <div class="d-flex align-items-center gap-3 mb-2">
          <img [src]="service.hostAvatar || 'assets/images/placeholder-user.png'" 
               class="rounded-circle object-fit-cover" width="64" height="64">
          <div class="text-center">
            <h4 class="h5 fw-bold mb-0">{{ service.hostName }}</h4>
            <span class="small text-muted">Chef</span>
          </div>
        </div>
      </div>

      <!-- List -->
      <div *ngFor="let q of qualifications" class="d-flex gap-3 mb-4">
        <i [class]="'bi fs-4 text-dark ' + q.icon"></i>
        <div>
          <h5 class="h6 fw-bold mb-1">{{ q.title }}</h5>
          <p class="text-muted small mb-0">{{ q.desc }}</p>
        </div>
      </div>

      <div class="bg-light rounded-3 p-3 text-center my-4">
        <button class="btn btn-link text-dark fw-bold text-decoration-none">Message {{ service.hostName }}</button>
      </div>
      
      <p class="small text-muted text-center">To help protect your payment, always use Airbnb to send money and communicate with hosts.</p>
    </section>

    <hr class="text-muted opacity-25">

    <!-- C. Specialties (Images) -->
    <section class="py-4">
      <h3 class="h4 fw-bold mb-4">My specialties</h3>
      <div class="row g-2">
        <div class="col-8">
          <img [src]="specialtiesImages[0]" class="w-100 rounded-3 object-fit-cover" style="height: 300px;">
        </div>
        <div class="col-4">
          <div class="d-flex flex-column gap-2 h-100">
            <img [src]="specialtiesImages[1]" class="w-100 rounded-3 object-fit-cover h-50">
            <div class="position-relative h-50">
              <img [src]="specialtiesImages[2]" class="w-100 rounded-3 object-fit-cover h-100">
              <button class="btn btn-light btn-sm position-absolute bottom-0 end-0 m-2 rounded-circle shadow-sm">
                <i class="bi bi-grid-3x3-gap"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <hr class="text-muted opacity-25">

    <!-- D. Things to know -->
    <section class="py-4">
      <h3 class="h4 fw-bold mb-4">Things to know</h3>
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <div class="col">
          <h5 class="h6 fw-bold">Guest requirements</h5>
          <p class="small text-muted">Guests ages 2 and up can attend.</p>
        </div>
        <div class="col">
          <h5 class="h6 fw-bold">Cancellation policy</h5>
          <p class="small text-muted">Cancel at least 1 day before for a full refund.</p>
        </div>
      </div>
    </section>

    <hr class="text-muted opacity-25">

    <!-- E. Map (I'll come to you) -->
    <section class="py-4">
      <h3 class="h4 fw-bold mb-2">I'll come to you</h3>
      <p class="text-muted mb-4">I travel to guests in {{ service.city }}.</p>
      <div class="rounded-4 overflow-hidden bg-light" style="height: 300px;">
        <!-- Static Map Image -->
        <img src="https://maps.googleapis.com/maps/api/staticmap?center=Rome,Italy&zoom=12&size=600x300&maptype=roadmap&style=feature:all|element:labels|visibility:off&key=YOUR_KEY_OR_MOCK" 
             class="w-100 h-100 object-fit-cover"
             onerror="this.src=''"> 
            
      </div>
    </section>

  </div>

</div>

<!-- ✅ Sticky Bottom Action Bar -->
<div class="fixed-bottom bg-white border-top py-3 px-4 shadow-lg d-flex justify-content-center">
  <div class="container d-flex justify-content-between align-items-center" style="max-width: 900px;">
    
    <!-- Price Info -->
    <div class="d-flex flex-column">
      <div class="d-flex align-items-baseline gap-1">
        <span class="h5 fw-bold mb-0 text-dark">From {{ service.pricePerUnit | currency:'EGP ':'symbol':'1.0-0' }}</span>
        <span class="small text-muted">/ {{ service.pricingUnit }}</span>
      </div>
      <span class="small text-success fw-semibold">Free cancellation</span>
    </div>

    <!-- Reserve Button -->
    <button class="btn btn-danger px-5 py-2 fw-bold rounded-3" 
            style="background: #E31C5F; font-size: 1.1rem;">
      Reserve
    </button>

  </div>
</div>