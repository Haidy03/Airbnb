// المتغيرات
$border-color: #B0B0B0;
$text-color: #222222;

.checkout-page {
  max-width: 1120px;
  margin: 0 auto;
  padding: 40px 24px;
  font-family: 'Circular', -apple-system, sans-serif;
  color: $text-color;

  // Header
  .checkout-header {
    display: flex; align-items: center; gap: 24px; margin-bottom: 48px;
    .back-btn {
      background: transparent; border: none; padding: 10px; border-radius: 50%; cursor: pointer; font-size: 16px;
      &:hover { background: #f7f7f7; }
    }
    h1 { font-size: 32px; font-weight: 600; }
  }

  // Grid Layout
  .main-grid {
    display: grid;
    grid-template-columns: 1.3fr 1fr; // اليسار أكبر قليلاً
    gap: 80px;

    // ::::: LEFT COLUMN STYLES :::::
    .left-section {
      .step-header {
        margin-bottom: 24px;
        h2 { font-size: 22px; font-weight: 600; }
        &.disabled h2 { color: #b0b0b0; } // للخطوة رقم 2
      }

      // Payment Method Header (Card Icon + Radio)
      .payment-card-container {
        margin-bottom: 24px;
        .payment-method-header {
          display: flex; justify-content: space-between; align-items: center;
          margin-bottom: 16px;
          .method-info {
            display: flex; align-items: center; gap: 12px; font-weight: 600;
            i { font-size: 20px; }
          }
          .radio-circle {
            width: 20px; height: 20px; border: 6px solid #222; border-radius: 50%; // شكل الراديو المختار
          }
        }
      }

      // Inputs Styling (Shared logic for Borders)
      .form-inputs, .billing-inputs {
        .input-row {
          position: relative;

          input, select {
            width: 100%; padding: 16px; border: 1px solid $border-color;
            border-radius: 0; outline: none; font-size: 16px; background: white;
            margin-bottom: -1px; // دمج الحدود

            &:focus { border-color: #222; position: relative; z-index: 2; border-width: 2px; margin: -1px; }
          }

          // Rounding Logic
          &.top input { border-radius: 8px 8px 0 0; }
          &.middle input { border-radius: 0; }
          &.bottom input, &.bottom select { border-radius: 0 0 8px 8px; }

          // Icons inside inputs
          .lock-icon, .fa-chevron-down {
             position: absolute; right: 16px; top: 18px; color: #717171; pointer-events: none; z-index: 3;
          }

          // Split Inputs (Exp / CVV)
          &.split {
            display: flex;
            .half { width: 50%; }
            .left input { border-right: none; border-bottom-left-radius: 8px; } // زاوية دائرية تحت شمال
            .right input { border-bottom-right-radius: 8px; } // زاوية دائرية تحت يمين

            // في حالة وجود صفوف تحتها (زي الـ Billing)
            &:not(:last-child) .left input, &:not(:last-child) .right input { border-radius: 0; }
          }
        }
      }

      .billing-section {
        margin-top: 32px;
        h3 { font-size: 16px; font-weight: 600; margin-bottom: 16px; }
      }

      .btn-black {
        margin-top: 32px;
        background: #222222; color: white;
        width: 160px; padding: 14px;
        border: none; border-radius: 8px;
        font-size: 16px; font-weight: 600; cursor: pointer;
        &:hover { background: black; }
      }

      .divider { border: 0; border-top: 1px solid #ddd; margin: 40px 0; }
    }


    // ::::: RIGHT COLUMN STYLES :::::
    .right-section {
      .sticky-wrapper { position: sticky; top: 100px; }

      .summary-card {
        border: 1px solid #ddd; border-radius: 12px; padding: 24px; background: white;

        .card-header-row {
          display: flex; gap: 16px;
          img { width: 100px; height: 100px; border-radius: 8px; object-fit: cover; }
          .text-info {
            .superhost-tag { font-size: 12px; font-weight: 600; color: #222; }
            .listing-desc { font-size: 12px; color: #717171; margin: 2px 0; }
            h4 { font-size: 14px; line-height: 1.4; font-weight: 400; margin: 4px 0; }
            .rating { font-size: 12px; font-weight: 600; i { font-size: 10px; } }
          }
        }

        .divider { border: 0; border-top: 1px solid #ebebeb; margin: 24px 0; }

        .policy-section {
           h4 { font-size: 16px; margin-bottom: 4px; }
           p { font-size: 14px; color: #717171; line-height: 1.4; a { color: #222; font-weight: 600; text-decoration: underline; } }
        }

        .trip-details {
          .detail-row {
            display: flex; justify-content: space-between; margin-bottom: 20px;
            &:last-child { margin-bottom: 0; }
            h4 { font-size: 16px; margin-bottom: 2px; }
            p { font-size: 14px; color: #222; }
            .link-btn { background: none; border: none; text-decoration: underline; font-weight: 600; cursor: pointer; font-size: 16px;}
          }
        }

        .price-section {
          h4 { font-size: 22px; margin-bottom: 16px; }
          .line-item {
            display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 16px;
            &.total { font-weight: 800; margin-top: 16px; }
          }
          .breakdown-link { display: block; margin-top: 8px; text-decoration: underline; color: #222; font-weight: 600; font-size: 14px; }
        }
      }

      .rare-find-box {
        margin-top: 24px; display: flex; gap: 16px; align-items: flex-start;
        i { font-size: 24px; color: #E31C5F; margin-top: 2px; }
        .text {
           h4 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
           p { font-size: 14px; color: #717171; line-height: 1.4; }
        }
      }
    }

    // Responsive
    @media (max-width: 900px) {
      grid-template-columns: 1fr;
      .right-section { order: -1; margin-bottom: 40px; }
    }
  }
}
