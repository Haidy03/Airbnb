
<div class="property-card" (click)="onCardClick()">
  <!-- Image Carousel -->
  <div class="property-image-container">
    <div class="property-image-wrapper">
      <img
        [src]="property.images[currentImageIndex].url"
        [alt]="property.title"
        class="property-image"
      >

      <!-- Navigation Arrows -->
      <button
        *ngIf="property.images.length > 1 && currentImageIndex > 0"
        class="image-nav prev"
        (click)="previousImage($event)"
        aria-label="Previous image"
      >
        <i class="bi bi-chevron-left"></i>
      </button>
      <button
        *ngIf="property.images.length > 1 && currentImageIndex < property.images.length - 1"
        class="image-nav next"
        (click)="nextImage($event)"
        aria-label="Next image"
      >
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>

    <!-- Image Indicators -->
    <div class="image-indicators" *ngIf="property.images.length > 1">
      <span
        *ngFor="let img of property.images; let i = index"
        class="indicator"
        [class.active]="i === currentImageIndex"
        (click)="goToImage(i, $event)"
      ></span>
    </div>

    <!-- Guest Favorite Badge -->
    <div *ngIf="property.isGuestFavorite" class="guest-favorite-badge">
      Guest favorite
    </div>

    <!-- Favorite Heart Icon -->
    <button
      class="favorite-btn"
      (click)="onFavoriteClick($event)"
      [class.is-favorite]="isFavorite"
      aria-label="Add to favorites"
    >
      <i class="bi" [ngClass]="isFavorite ? 'bi-heart-fill' : 'bi-heart'"></i>
    </button>
  </div>

  <!-- Property Details -->
  <div class="property-details">
    <div class="property-header">
      <div class="property-location">
        <h3 class="property-title">{{ property.location?.city || property.title }}</h3>
      </div>
      <div class="property-rating" *ngIf="property.rating">
        <i class="bi bi-star-fill"></i>
        <span class="rating-value">{{ property.rating }}</span>
        <span class="reviews-count" *ngIf="property.reviewsCount">({{ property.reviewsCount }})</span>
      </div>
    </div>

    <!-- Property Type/Description -->
    <p class="property-type">{{ property.type }}</p>

    <!-- Property Capacity -->
    <div class="property-capacity">
      <span class="capacity-item" *ngIf="property.capacity?.bedrooms">
        {{ property.capacity.bedrooms }} bedroom<span *ngIf="property.capacity.bedrooms > 1">s</span>
      </span>
      <span class="capacity-separator" *ngIf="property.capacity?.bedrooms && property.capacity?.beds">Â·</span>
      <span class="capacity-item" *ngIf="property.capacity?.beds">
        {{ property.capacity.beds }} bed<span *ngIf="property.capacity.beds > 1">s</span>
      </span>
    </div>

    <!-- Price -->
    <div class="property-footer">
      <div class="property-price">
        <span class="price-amount">{{ property.price | number:'1.0-0' }} {{ property.currency }}</span>
        <span class="price-period">for 1 night</span>
      </div>
      <div *ngIf="property.instantBook" class="instant-book">
        <i class="bi bi-lightning-fill"></i> Instant Book
      </div>
    </div>
  </div>
</div>
