<div class="trips-container">
  
  <div class="header">
    <h2 class="title">Past Trips</h2>
  </div>

  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading...</p>
  </div>

  <div *ngIf="!isLoading && completedStays.length === 0 && completedExperiences.length === 0" class="empty-state">
    <p>No completed trips yet.</p>
  </div>

  <!-- ✅ STAYS SECTION -->
  <div *ngIf="!isLoading && completedStays.length > 0" class="section-wrapper">
    <h3 class="section-title">Stays</h3>
    <div class="trips-grid">
      <div *ngFor="let trip of completedStays" class="trip-card" (click)="openDetails(trip)">
        
        <div class="trip-image-wrap">
          <img [src]="getImageUrl(trip)" [alt]="getTitle(trip)" class="trip-image">
          <div class="status-badge">COMPLETED</div>
        </div>

        <div class="trip-info">
          <h3 class="trip-destination">{{ getTitle(trip) }}</h3>
          <p class="trip-host">Hosted by {{ trip.hostName || 'Host' }}</p>

          <div class="date-row">
            <i class="fa-regular fa-calendar"></i>
            <!-- ✅ التعديل هنا: إضافة checkInDate و checkOutDate -->
            <span>
              {{ formatDate(trip.checkIn || trip.checkInDate || trip.startDate) }} - 
              {{ formatDate(trip.checkOut || trip.checkOutDate || trip.endDate) }}
            </span>
          </div>

          <div class="trip-price">
            <strong>{{ trip.totalPrice | currency:'EGP':'symbol':'1.0-0' }}</strong> total
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- ✅ EXPERIENCES SECTION -->
  <div *ngIf="!isLoading && completedExperiences.length > 0" class="section-wrapper">
    <h3 class="section-title">Experiences</h3>
    <div class="trips-grid">
      <div *ngFor="let trip of completedExperiences" class="trip-card" (click)="openDetails(trip)">
        
        <div class="trip-image-wrap">
          <img [src]="getImageUrl(trip)" [alt]="getTitle(trip)" class="trip-image">
          <div class="status-badge">COMPLETED</div>
        </div>

        <div class="trip-info">
          <h3 class="trip-destination">{{ getTitle(trip) }}</h3>
          <p class="trip-host">Hosted by {{ trip.hostName || 'Host' }}</p>

          <div class="date-row">
            <i class="fa-regular fa-calendar"></i>
            <!-- ✅ التعديل هنا: إضافة date و experienceDate -->
            <span>
                {{ formatDate(trip.date || trip.experienceDate || trip.startDate || trip.checkInDate || trip.checkIn) }}
            </span>
          </div>

          <div class="trip-price">
            <strong>{{ trip.totalPrice | currency:'EGP':'symbol':'1.0-0' }}</strong> total
          </div>
        </div>

      </div>
    </div>
  </div>

</div>